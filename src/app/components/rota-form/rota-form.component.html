<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-success text-white">
      <h4 class="mb-0"><i class="bi bi-signpost-2 me-2"></i>Nova Rota</h4>
    </div>
    
    <div class="card-body">
      <form [formGroup]="rotaForm" (ngSubmit)="onSubmit()">
        
        <div class="mb-3">
          <label class="form-label fw-bold">Nome da Rota</label>
          <input type="text" class="form-control" formControlName="nome" 
                 placeholder="Ex: Rota Centro-Sul" 
                 [class.is-invalid]="rotaForm.get('nome')?.invalid && rotaForm.get('nome')?.touched">
          <div class="invalid-feedback">O nome da rota é obrigatório.</div>
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Placa do Caminhão Designado</label>
          <input type="text" class="form-control" formControlName="caminhaoPlacaDesignada" 
                 placeholder="ABC1D23" maxlength="7"
                 [class.is-invalid]="rotaForm.get('caminhaoPlacaDesignada')?.invalid && rotaForm.get('caminhaoPlacaDesignada')?.touched">
          <div class="form-text">Formato Mercosul (3 letras, 1 número, 1 letra, 2 números).</div>
          <div class="invalid-feedback">Placa inválida ou vazia.</div>
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Sequência de Bairros</label>
          <textarea class="form-control" formControlName="bairrosInput" rows="2" 
                    placeholder="Digite os bairros separados por vírgula. Ex: Centro, Bueno, Marista"></textarea>
          <div class="form-text text-muted">A ordem digitada será usada para calcular a distância.</div>
        </div>

        <div class="mb-4">
          <label class="form-label fw-bold d-block">Tipos de Resíduos Aceitos</label>
          <div class="form-check form-check-inline" *ngFor="let residuo of opcoesResiduos">
            <input class="form-check-input check-residuo" type="checkbox" [value]="residuo" [id]="residuo">
            <label class="form-check-label" [for]="residuo">{{ residuo }}</label>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2">
          <button type="button" class="btn btn-secondary" routerLink="/rotas">Cancelar</button>
          <button type="submit" class="btn btn-success" [disabled]="rotaForm.invalid || isSubmitting">
            <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1"></span>
            Salvar Rota
          </button>
        </div>

      </form>
    </div>
  </div>
</div>