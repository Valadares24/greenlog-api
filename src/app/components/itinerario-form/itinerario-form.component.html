<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-success text-white">
      <h4 class="mb-0"><i class="bi bi-calendar-plus me-2"></i>Agendar Coleta</h4>
    </div>
    
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        
        <div class="mb-3">
          <label class="form-label fw-bold">Selecione a Rota</label>
          <select class="form-select" formControlName="rotaId">
            <option value="" disabled selected>-- Escolha uma rota --</option>
            <option *ngFor="let rota of rotasDisponiveis" [value]="rota.id">
              {{ rota.nome }} ({{ rota.distanciaTotalKm | number:'1.2-2' }} km)
            </option>
          </select>
          <div class="invalid-feedback" *ngIf="form.get('rotaId')?.invalid && form.get('rotaId')?.touched">
            A rota é obrigatória.
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Caminhão Responsável (Placa)</label>
          <input type="text" class="form-control" formControlName="caminhaoPlaca" 
                 placeholder="ABC1D23" maxlength="7">
          <div class="form-text">Formato Mercosul. O sistema validará se o caminhão está livre.</div>
        </div>

        <div class="mb-4">
          <label class="form-label fw-bold">Data da Coleta</label>
          <input type="date" class="form-control" formControlName="dataColeta">
        </div>

        <div class="d-flex justify-content-end gap-2">
          <button type="button" class="btn btn-secondary" routerLink="/itinerarios">Cancelar</button>
          <button type="submit" class="btn btn-success" [disabled]="form.invalid || isSubmitting">
            Agendar
          </button>
        </div>

      </form>
    </div>
  </div>
</div>